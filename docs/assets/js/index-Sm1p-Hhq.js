import{M as e,c as t,a,b as l,d as o,e as s,w as n,C as i,B as r,S as d,D as h,o as m,t as c,f as u,n as f,F as p,r as y,g as w,h as x,R as z,i as g,I as v,T as U,j as S,k as V,l as _,m as M}from"./vendor-CRPwuTcb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const k={class:"maze"},b={class:"maze-box"},E={key:0,class:"maze-time"},C={class:"maze-spin"},L=["innerHTML"],A=["innerHTML"],T=["innerHTML"],D={class:"loadingTip"},R={class:"text"},$={class:"button"},H={class:"controls"};M(((e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a})({data:()=>({now:0,time:1,show:!1,rows:41,maze:[],width:"40%",start:!1,timing:!1,player:{x:1,y:1},loading:!1,mazeSetUp:{end:"🚩",dark:!1,time:1,rows:41,timing:!1,player:"😃",arrival:"🥰",deadEnd:20,algorithm:"Maze",wallColor:"#333333",pathColor:"#EEEEEE",endLocation:"center"},endLocation:"center",hasReachedEnd:!1,countdownValue:0}),computed:{end(){const e=this.rows,t=Math.floor(e/2),a=this.endLocation,l={center:{x:t,y:t},random:null,leftDown:{x:1,y:e-2},rightTop:{x:e-2,y:1},rightDown:{x:e-2,y:e-2}};if("random"===a){const e=[l.leftDown,l.rightTop,l.center,l.rightDown];l.random=e[Math.floor(Math.random()*e.length)]}const o=l[a];if(o){const e=this.maze.find((e=>e.x===o.x&&e.y===o.y));if(e)return e.wall=!1,o}}},mounted(){this.generateMaze(),this.renderingInitialization(window.innerWidth),window.addEventListener("keydown",this.move),window.addEventListener("resize",(e=>this.renderingInitialization(e.target.innerWidth)))},methods:{timerEnds(){this.now=0,this.countdownValue=0,this.loading=!1,this.player={x:1,y:1},this.generateMaze()},renderingInitialization(e){const t=e>750?41:25;this.rows=t,this.width=e>750?"40%":"100%",this.mazeSetUp.rows=t,this.generateMaze()},saveSettings(){this.generateMaze(),this.show=!1,e.success("地图数据设置成功")},generateMaze(){const{time:e,rows:t,dark:a,start:l,timing:o,wallColor:s,algorithm:n,pathColor:i,endLocation:r}=this.mazeSetUp;this.now=Date.now(),this.time=e,this.rows=t,this.start=o,this.timing=o,this.endLocation=r,this.countdownValue=this.now+6e4*this.time,this.$nextTick((()=>{const e=document.body,t=document.documentElement.style;t.setProperty("--wallColor",s),t.setProperty("--pathColor",i),a?e.setAttribute("arco-theme","dark"):e.removeAttribute("arco-theme")})),this.maze=Array(t*t).fill().map(((e,a)=>({x:a%t,y:Math.floor(a/t),wall:!0}))),"Maze"==n?this.carveMaze(1,1):"Generation"==n?this.Generation():"Algorithm"==n&&this.Algorithm(1,1),this.maze.find((e=>1===e.x&&1===e.y)).wall=!1,this.maze.find((e=>e.x===this.end.x&&e.y===this.end.y)).wall=!1,this.createDeadEnds()},Algorithm(e,t){const a=this.coordinateArray(2);a.sort((()=>Math.random()-.5)),a.forEach((a=>{const l=e+a.x,o=t+a.y;if(l>0&&l<this.rows-1&&o>0&&o<this.rows-1){const s=this.maze.find((e=>e.x===l&&e.y===o));if(s&&s.wall){const n=e+a.x/2,i=t+a.y/2;this.maze.find((e=>e.x===n&&e.y===i)).wall=!1,s.wall=!1,this.Algorithm(l,o)}}}))},Generation(){const e=[],t={};for(let l=1;l<this.rows;l+=2)for(let t=1;t<this.rows;t+=2)l<this.rows-2&&e.push({from:{x:l,y:t},to:{x:l+2,y:t}}),t<this.rows-2&&e.push({from:{x:l,y:t},to:{x:l,y:t+2}});e.sort((()=>Math.random()-.5)),e.forEach((e=>{const a=`${e.from.x},${e.from.y}`,l=`${e.to.x},${e.to.y}`;t[a]=a,t[l]=l}));const a=e=>(t[e]!==e&&(t[e]=a(t[e])),t[e]);e.forEach((e=>{if(((e,l)=>{const o=a(e),s=a(l);return o!==s&&(t[o]=s,!0)})(`${e.from.x},${e.from.y}`,`${e.to.x},${e.to.y}`)){this.maze.find((t=>t.x===e.from.x&&t.y===e.from.y)).wall=!1,this.maze.find((t=>t.x===e.to.x&&t.y===e.to.y)).wall=!1;const t=(e.from.x+e.to.x)/2,a=(e.from.y+e.to.y)/2;this.maze.find((e=>e.x===t&&e.y===a)).wall=!1}}))},carveMaze(e,t){const a=this.maze.find((a=>a.x===e&&a.y===t));a&&(a.wall=!1);const l=this.coordinateArray(2);l.sort((()=>Math.random()-.5)),l.forEach((a=>{const l=e+a.x,o=t+a.y;if(l>0&&l<this.rows-1&&o>0&&o<this.rows-1){const s=this.maze.find((e=>e.x===l&&e.y===o));if(s&&s.wall){const s=e+a.x/2,n=t+a.y/2,i=this.maze.find((e=>e.x===s&&e.y===n));i&&(i.wall=!1),this.carveMaze(l,o)}}}))},createDeadEnds(){const e=this.maze.filter((e=>!e.wall)),t=Math.floor(e.length*(this.mazeSetUp.deadEnd/100));for(let a=0;a<t;a++){const t=e[Math.floor(Math.random()*e.length)];1===this.getNeighbors(t).filter((e=>!e.wall)).length&&(this.maze.find((e=>e.x===t.x&&e.y===t.y)).wall=!0)}},getCellClass:e=>({cell:!0,wall:e.wall,path:!e.wall}),move(t){const{x:a,y:l}=this.player;let o=a,s=l;switch(t="string"==typeof t?t:t.key){case"w":case"up":case"ArrowUp":l>0&&s--;break;case"s":case"down":case"ArrowDown":l<this.rows-1&&s++;break;case"a":case"left":case"ArrowLeft":a>0&&o--;break;case"d":case"right":case"ArrowRight":a<this.rows-1&&o++;break;case"q":case"show":return void(this.show=!this.show);case"r":case"refresh":return this.generateMaze(),void e.success("刷新成功");default:return}this.maze.find((e=>e.x===o&&e.y===s)).wall||(this.player.x=o,this.player.y=s,this.hasReachedEnd=this.player.x===this.end.x&&this.player.y===this.end.y,this.hasReachedEnd&&!this.loading&&(this.start=!1,this.loading=!0))},getNeighbors(e){const t=this.coordinateArray(1),a=[];return t.forEach((t=>{const l=e.x+t.x,o=e.y+t.y;if(l>=0&&l<this.rows&&o>=0&&o<this.rows){const e=this.maze.find((e=>e.x===l&&e.y===o));e.wall||a.push(e)}})),a},coordinateArray:e=>[{x:0,y:-e},{x:0,y:e},{x:-e,y:0},{x:e,y:0}]}},[["render",function(e,M,G,K,O,I){const N=i,P=r,B=d,W=w,j=x,q=z,F=g,Q=v,J=U,X=S,Y=V,Z=h;return m(),t("div",k,[a("div",b,[O.timing?(m(),t("div",E,[(m(),l(N,{format:"倒计时: mm:ss:SSS",onFinish:M[0]||(M[0]=e=>O.loading=!0),start:O.start,key:O.now,value:O.countdownValue,now:O.now},null,8,["start","value","now"]))])):o("",!0),a("div",C,[s(B,{loading:O.loading,"hide-icon":""},{tip:n((()=>[a("div",D,[a("div",R,c(O.hasReachedEnd?"恭喜你挑战成功!":"倒计时结束!")+" 是否重新开始挑战? ",1),a("div",$,[s(P,{onClick:M[1]||(M[1]=e=>O.loading=!1)},{default:n((()=>M[21]||(M[21]=[u("取消")]))),_:1}),s(P,{onClick:I.timerEnds,type:"primary"},{default:n((()=>M[22]||(M[22]=[u("确定")]))),_:1},8,["onClick"])])])])),default:n((()=>[a("div",{class:"maze-container",style:f({gridTemplateColumns:`repeat(${O.rows}, 10px)`})},[(m(!0),t(p,null,y(O.maze,((e,a)=>(m(),t("div",{key:a,class:_(I.getCellClass(e))},[O.player.x!==e.x||O.player.y!==e.y||O.hasReachedEnd?o("",!0):(m(),t("span",{key:0,innerHTML:O.mazeSetUp.player},null,8,L)),I.end.x!==e.x||I.end.y!==e.y||O.hasReachedEnd?o("",!0):(m(),t("span",{key:1,innerHTML:O.mazeSetUp.end},null,8,A)),O.hasReachedEnd&&I.end.x===e.x&&I.end.y===e.y?(m(),t("span",{key:2,innerHTML:O.mazeSetUp.arrival},null,8,T)):o("",!0)],2)))),128))],4)])),_:1},8,["loading"])]),a("div",H,[s(P,{onClick:M[2]||(M[2]=e=>I.move("up"))},{default:n((()=>M[23]||(M[23]=[u("上"),a("span",{class:"shortcutKeys"},"(W)",-1)]))),_:1}),s(P,{onClick:M[3]||(M[3]=e=>I.move("down"))},{default:n((()=>M[24]||(M[24]=[u("下"),a("span",{class:"shortcutKeys"},"(S)",-1)]))),_:1}),s(P,{onClick:M[4]||(M[4]=e=>I.move("left"))},{default:n((()=>M[25]||(M[25]=[u("左"),a("span",{class:"shortcutKeys"},"(A)",-1)]))),_:1}),s(P,{onClick:M[5]||(M[5]=e=>I.move("right"))},{default:n((()=>M[26]||(M[26]=[u("右"),a("span",{class:"shortcutKeys"},"(D)",-1)]))),_:1}),s(P,{onClick:M[6]||(M[6]=e=>I.move("refresh"))},{default:n((()=>M[27]||(M[27]=[u("刷新"),a("span",{class:"shortcutKeys"},"(R)",-1)]))),_:1}),s(P,{onClick:M[7]||(M[7]=e=>I.move("show"))},{default:n((()=>M[28]||(M[28]=[u("设置"),a("span",{class:"shortcutKeys"},"(Q)",-1)]))),_:1})]),s(Z,{width:O.width,title:"迷宫设置",visible:O.show,onOk:I.saveSettings,onCancel:M[20]||(M[20]=e=>O.show=!1),unmountOnClose:""},{default:n((()=>[s(Y,{model:O.mazeSetUp,layout:"vertical"},{default:n((()=>[s(j,{field:"dark",label:"夜间模式",extra:"是否开启夜间模式"},{default:n((()=>[s(W,{modelValue:O.mazeSetUp.dark,"onUpdate:modelValue":M[8]||(M[8]=e=>O.mazeSetUp.dark=e),type:"round"},null,8,["modelValue"])])),_:1}),s(j,{field:"endLocation",label:"迷宫生成算法",extra:"默认为Maze"},{default:n((()=>[s(F,{modelValue:O.mazeSetUp.algorithm,"onUpdate:modelValue":M[9]||(M[9]=e=>O.mazeSetUp.algorithm=e),type:"button"},{default:n((()=>[s(q,{value:"Maze"},{default:n((()=>M[29]||(M[29]=[u("Maze")]))),_:1}),s(q,{value:"Generation"},{default:n((()=>M[30]||(M[30]=[u("Generation")]))),_:1}),s(q,{value:"Algorithm"},{default:n((()=>M[31]||(M[31]=[u("Algorithm")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),s(j,{field:"rows",label:"迷宫大小",extra:"迷宫大小必须为单数, 数字越大生成的迷宫就越大"},{default:n((()=>[s(Q,{modelValue:O.mazeSetUp.rows,"onUpdate:modelValue":M[10]||(M[10]=e=>O.mazeSetUp.rows=e),min:19,placeholder:"迷宫大小"},null,8,["modelValue"])])),_:1}),s(j,{field:"deadEnd",label:"死胡同数量占比",extra:"填写百分比"},{default:n((()=>[s(Q,{modelValue:O.mazeSetUp.deadEnd,"onUpdate:modelValue":M[11]||(M[11]=e=>O.mazeSetUp.deadEnd=e),max:100,min:10,placeholder:"死胡同数量占比"},null,8,["modelValue"])])),_:1}),s(j,{field:"endLocation",label:"终点位置",extra:"终点位置默认为中间"},{default:n((()=>[s(F,{modelValue:O.mazeSetUp.endLocation,"onUpdate:modelValue":M[12]||(M[12]=e=>O.mazeSetUp.endLocation=e),type:"button"},{default:n((()=>[s(q,{value:"rightTop"},{default:n((()=>M[32]||(M[32]=[u("右上角")]))),_:1}),s(q,{value:"leftDown"},{default:n((()=>M[33]||(M[33]=[u("左下角")]))),_:1}),s(q,{value:"center"},{default:n((()=>M[34]||(M[34]=[u("中间")]))),_:1}),s(q,{value:"rightDown"},{default:n((()=>M[35]||(M[35]=[u("右下角")]))),_:1}),s(q,{value:"random"},{default:n((()=>M[36]||(M[36]=[u("随机")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),s(j,{field:"player",label:"计时挑战",extra:"是否开启计时挑战"},{default:n((()=>[s(W,{modelValue:O.mazeSetUp.timing,"onUpdate:modelValue":M[13]||(M[13]=e=>O.mazeSetUp.timing=e),type:"round"},null,8,["modelValue"])])),_:1}),s(j,{field:"player",label:"计时时限",extra:"最少1分钟"},{default:n((()=>[s(Q,{modelValue:O.mazeSetUp.time,"onUpdate:modelValue":M[14]||(M[14]=e=>O.mazeSetUp.time=e),min:1,placeholder:"最少1分钟"},null,8,["modelValue"])])),_:1}),s(j,{field:"player",label:"玩家图标",extra:"支持填写HTML标签"},{default:n((()=>[s(J,{modelValue:O.mazeSetUp.player,"onUpdate:modelValue":M[15]||(M[15]=e=>O.mazeSetUp.player=e),placeholder:"玩家图标"},null,8,["modelValue"])])),_:1}),s(j,{field:"end",label:"终点图标",extra:"支持填写HTML标签"},{default:n((()=>[s(J,{modelValue:O.mazeSetUp.end,"onUpdate:modelValue":M[16]||(M[16]=e=>O.mazeSetUp.end=e),placeholder:"终点图标"},null,8,["modelValue"])])),_:1}),s(j,{field:"arrival",label:"抵达终点图标",extra:"支持填写HTML标签"},{default:n((()=>[s(J,{modelValue:O.mazeSetUp.arrival,"onUpdate:modelValue":M[17]||(M[17]=e=>O.mazeSetUp.arrival=e),placeholder:"抵达终点图标"},null,8,["modelValue"])])),_:1}),s(j,{field:"wallColor",label:"墙壁颜色",extra:"支持选择16进制和RGB颜色代码"},{default:n((()=>[s(X,{modelValue:O.mazeSetUp.wallColor,"onUpdate:modelValue":M[18]||(M[18]=e=>O.mazeSetUp.wallColor=e),"show-preset":"","show-history":"",showText:""},null,8,["modelValue"])])),_:1}),s(j,{field:"pathColor",label:"路径颜色",extra:"支持选择16进制和RGB颜色代码"},{default:n((()=>[s(X,{modelValue:O.mazeSetUp.pathColor,"onUpdate:modelValue":M[19]||(M[19]=e=>O.mazeSetUp.pathColor=e),"show-preset":"","show-history":"",showText:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["width","visible","onOk"])])])}],["__scopeId","data-v-34435815"]])).mount("#app");
